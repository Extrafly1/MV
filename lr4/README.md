# Лабораторная работа №4  
## Алгоритм выделения границ — метод Канни (ручная реализация)

---

## Цель работы

Изучить этапы работы алгоритма **Canny Edge Detection**, реализовать его вручную (без использования `cv2.Canny()`) и провести визуальный анализ полученных результатов.

---

## Теоретическая часть

Алгоритм **Канни** предназначен для выделения контуров объектов на изображении и состоит из нескольких последовательных шагов:

1. **Сглаживание (Gaussian Blur)**  
   Уменьшает шум изображения с помощью гауссова фильтра.  
   \[
   G(x, y) = \frac{1}{2\pi\sigma^2} e^{-\frac{x^2 + y^2}{2\sigma^2}}
   \]

2. **Вычисление градиента (Sobel Operator)**  
   Определяет направление и силу изменения яркости.  
   \[
   G_x = I * S_x, \quad G_y = I * S_y
   \]
   где \(S_x, S_y\) — операторы Собеля.  
   Модуль и угол градиента:
   \[
   M = \sqrt{G_x^2 + G_y^2}, \quad \theta = \tan^{-1}\left(\frac{G_y}{G_x}\right)
   \]

3. **Подавление немаксимумов (Non-Maximum Suppression)**  
   Оставляет только локальные максимумы — тонкие контуры.

4. **Двойное пороговое преобразование (Double Thresholding)**  
   Разделяет пиксели на:
   - сильные (явные границы)  
   - слабые (возможные границы)  
   - шум (отбрасывается)

5. **Отслеживание по гистерезису (Edge Tracking by Hysteresis)**  
   Сохраняет слабые границы, если они связаны с сильными.

---

## Результаты работы программы

| Этап | Описание                                       | Окно вывода                           |
| ---- | ---------------------------------------------- | ------------------------------------- |
| 1    | Исходное изображение в градациях серого        | `1. Исходное изображение (Grayscale)` |
| 2    | Размытие по Гауссу (снижение шума)             | `2. Размытие по Гауссу`               |
| 3    | Расчёт модуля градиента                        | `3. Модуль градиента`                 |
| 4    | Угол направления градиента                     | `4. Угол градиента`                   |
| 5    | Подавление немаксимумов (сужение контуров)     | `5. Подавление немаксимумов`          |
| 6    | Отслеживание по гистерезису (итоговые границы) | `6. Отслеживание по гистерезису`      |

---

## Сравнение с функцией OpenCV

Для сравнения можно добавить в конец программы:

```python
edges_cv = cv2.Canny(img, 100, 200)
cv2.imshow('OpenCV Canny', edges_cv)
```

Встроенный алгоритм `cv2.Canny()` работает быстрее,
но результаты очень близки к ручной реализации.

---

## Выводы

* Реализованы все основные этапы алгоритма Канни вручную.
* Получены представления о том, как формируются границы на изображении.
* Подтверждено, что результаты совпадают с библиотечной функцией OpenCV.
* Практическая реализация позволила глубже понять работу с фильтрами, градиентами и пороговой обработкой изображений.

